<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>taste武汉觅食图</title>
  <!-- <script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=4uflonZZSlKmSteAjzedhFDZOvGwXZeO"></script> -->
  <style type="text/css">
    body, html,#container {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"微软雅黑";}
  </style>
</head>
<body>
  <div id="container"></div>
</body>
<script>
  var addressList = [
    {
      name: '密码局',
      address: '湖北省密码管理局',
      type: '',
      time: '中餐营业到14:00, 晚餐营业到21:00',
      info: '',
      recommend: '铜锅牛尾 辣子黄骨鱼 材火豆腐 鸡汤',
      lat: 30.555937,
      lng: 114.357868
    },
    {
      name: '',
      address: '恩施土家族苗族自治州电网管理局驻武汉办事处',
      type: '恩施菜',
      time: '白天11点至14点, 晚上17点至21点',
      info: '',
      recommend: '强烈推荐沫沫鸭 炕土豆 腊猪蹄火锅 豆瓣鲫鱼 腊肉炸广椒 苞谷饭 然后还有恩施最具代表性的张关合渣',
      lat: 30.285888,
      lng: 109.491923
    },
    {
      name: '福哇酒楼',
      address: '武汉友谊大道823附1号',
      type: '',
      time: '11:00-14:00, 17:00-20:00',
      info: '',
      recommend: ' 我们当天点了 烧鸡 鱼泡 辣椒炒牛肉丝 干子肉丝 一个猪肝平菇汤',
      lat: 30.624049,
      lng: 114.38879
    },
    {
      name: '翠翠家常菜',
      address: '武汉市武昌区建设新村20栋',
      type: '家常菜',
      time: '11:00-14:30, 16:30-20:30',
      info: '',
      recommend: '都是招牌菜',
      lat: 30.609493,
      lng: 114.34894
    },
    {
      name: '重庆辣子鱼',
      address: '武汉市青山区106街社区北门',
      type: '鱼',
      time: '中午11点-2点，下午5点-10点',
      info: '',
      recommend: '招牌重庆辣子鱼 蜂窝玉米 麻花烧肥肠',
      lat: 30.629177,
      lng: 114.40812
    },
    {
      name: '黑皮烧烤',
      address: '武汉民意街办事处民意四路38号',
      type: '烧烤',
      time: '周二休息',
      info: '在武广商圈背后那边民意四路,地铁的班子可以直接转1号线到友谊路站下车导航搜“黑皮烧烤”步行大约10分钟',
      recommend: '肉筋 爪子',
      lat: 30.581384,
      lng: 114.284553
    },
    {
      name: '淘气牛杂',
      address: '武汉市江岸区解放公园路28号',
      type: '牛杂',
      time: '早上过早那个点到半夜12点或者凌晨1，2点',
      info: '',
      recommend: '牛杂粉，嫩牛肉，生烫腰花，财鱼片，牛瓦沟',
      lat: 30.608785,
      lng: 114.309587
    },
    {
      name: '老四家常菜',
      address: '武汉市江岸区解放公园路29号',
      type: '家常菜',
      time: '下午6点开始到凌晨3点',
      info: '淘气牛杂旁边小区里面',
      recommend: '牛杂粉，嫩牛肉，生烫腰花，财鱼片，牛瓦沟',
      lat: 31.608785,
      lng: 115.309587
    },
    {
      name: '苗栗路大腰子',
      address: '武汉市江岸区球东小区11栋3单元(近香港路)',
      type: '腰子',
      time: '14:00开门东西卖完关门',
      info: '直接搜索“串串副食店”到了苗栗路天桥之后看到有一个皇冠蛋糕背后的小区里面坐满了人的就是',
      recommend: '牛杂粉，嫩牛肉，生烫腰花，财鱼片，牛瓦沟',
      lat: 30.603023,
      lng: 114.297407
    },
    {
      name: '虾搞',
      address: '武汉市前进二路53号',
      type: '虾',
      time: '下午五点开门到凌晨一两点',
      info: '虾搞油焖大虾馆',
      recommend: '香辣蟹 羊肉锅仔',
      lat: 30.582934,
      lng: 114.291447
    },
    {
      name: '阿斌大排档',
      address: '武汉市赵家条31-1号',
      type: '大排档',
      time: '下午5点就出来了一直到凌晨2-3点',
      info: '学斌大排档',
      recommend: '带鱼，剥皮鱼，臭鲑鱼，刁子鱼糖醋排骨，烧鸡公，蛋白牛筋，牛肉锅仔,夏天还可以吃到油焖大虾、蹦蹦和鳝鱼',
      lat: 30.623492,
      lng: 114.305387
    },
    {
      name: '小黄鱼酒楼',
      address: '武汉市江岸区合作路30号',
      type: '鱼',
      time: '营业时间晚上至9点',
      info: '',
      recommend: '小黄鱼 划水',
      lat: 30.591155,
      lng: 114.304498
    },
    {
      name: '老挖正宗烤财鱼虾球',
      address: '武汉市大智嘉园A幢1层28号房',
      type: '虾',
      time: '17:00-凌晨2点',
      info: '',
      recommend: '财鱼 虾球',
      lat: 30.596548,
      lng: 114.300462
    },
    {
      name: '张记牛肉牛杂萝卜汤',
      address: '武汉市硚口区古田二路38号',
      type: '',
      time: '17:00—22:00',
      info: '',
      recommend: '财鱼 虾球',
      lat: 30.597035,
      lng: 114.198087
    },
    {
      name: '王二娃',
      address: '武汉市二七街赵家条88号御景世家第4幢1层(5)商号房',
      type: '',
      time: '11:00-22:00',
      info: '',
      recommend: '酸菜鱼 乌江鱼  烧鸡公',
      lat: 30.628236,
      lng: 114.306145
    },
    {
      name: '满天星太珍火锅',
      address: '武汉市黄兴路28号长青广场(好又多超市附近)',
      type: '',
      time: '17:00-02:00',
      info: '',
      recommend: '',
      lat: 30.59683,
      lng: 114.304179
    },
    {
      name: '四川丁源火锅',
      address: '武汉市二七横路79号',
      type: '火锅',
      time: '11:00-24:00',
      info: '',
      recommend: '炸酥肉',
      lat: 30.635025,
      lng: 114.323956
    },
    {
      name: '全刀子家常菜',
      address: '武汉市大兴路69号',
      type: '家常菜',
      time: '11:00-24:00',
      info: '',
      recommend: '麻花梅子肉汤 卤蛋烧蹄花 干煸藕丝 青蛙烧鳝鱼,田螺,干烧小洗(喜)头鱼',
      lat: 30.573961,
      lng: 114.296169
    },
    {
      name: '三三零招待所',
      address: '武汉市南泥湾大道256号附近',
      type: '家常菜',
      time: '17:00后',
      info: '三三零家常菜',
      recommend: '滑蛋牛肉 汆汤圆子 酒鬼牛肉',
      lat: 30.611658,
      lng: 114.191006
    },
    {
      name: '赤浪川菜馆',
      address: '武汉市妙墩横路8号',
      type: '川菜',
      time: '午 11:00-14:30   晚 16:30-22:30',
      info: '',
      recommend: '干煸牛肉丝  牙签肉 半边鱼 嫰腰花 鱼香肉丝 干煸藕丝',
      lat: 30.597363,
      lng: 114.268082
    },
  ];
	function loadJScript() {
		var script = document.createElement("script");
		script.type = "text/javascript";
		script.src = "http://api.map.baidu.com/api?v=3.0&ak=4uflonZZSlKmSteAjzedhFDZOvGwXZeO&callback=init";
		document.body.appendChild(script);
	}
	function init() {
		var map = new BMap.Map("container");            // 创建Map实例
	  map.centerAndZoom("武汉",13);                 //启用滚轮放大缩小
    // 添加带有定位的导航控件
    var navigationControl = new BMap.NavigationControl({
      // 靠左上角位置
      anchor: BMAP_ANCHOR_TOP_RIGHT,
      // LARGE类型
      type: BMAP_NAVIGATION_CONTROL_LARGE,
      // 启用显示定位
      enableGeolocation: true
    });
    map.addControl(navigationControl);
    // ComplexCustomOverlay
    ComplexCustomOverlay.prototype = new BMap.Overlay();
    ComplexCustomOverlay.prototype.initialize = function(map){
      this._map = map;
      var div = this._div = document.createElement("div");
      div.style.position = "absolute";
      div.style.zIndex = BMap.Overlay.getZIndex(this._point.lat);
      div.style.backgroundColor = "#EE5D5B";
      div.style.border = "1px solid #BC3B3A";
      div.style.color = "white";
      div.style.height = "18px";
      div.style.padding = "2px";
      div.style.lineHeight = "18px";
      div.style.whiteSpace = "nowrap";
      div.style.MozUserSelect = "none";
      div.style.fontSize = "12px"
      var span = this._span = document.createElement("span");
      div.appendChild(span);
      span.appendChild(document.createTextNode(this._text));      
      var that = this;

      var arrow = this._arrow = document.createElement("div");
      arrow.style.background = "url(http://map.baidu.com/fwmap/upload/r/map/fwmap/static/house/images/label.png) no-repeat";
      arrow.style.position = "absolute";
      arrow.style.width = "11px";
      arrow.style.height = "10px";
      arrow.style.top = "22px";
      arrow.style.left = "10px";
      arrow.style.overflow = "hidden";
      div.appendChild(arrow);
      map.getPanes().labelPane.appendChild(div);
      return div;
    }
    ComplexCustomOverlay.prototype.draw = function(){
      var map = this._map;
      var pixel = map.pointToOverlayPixel(this._point);
      this._div.style.left = pixel.x - parseInt(this._arrow.style.left) + "px";
      this._div.style.top  = pixel.y - 46 + "px";
    }
    addressList.forEach(addr => {
      var point = new BMap.Point(addr.lng, addr.lat)
      addMarker(point, map)
      // 
      var myCompOverlay = new ComplexCustomOverlay(new BMap.Point(addr.lng, addr.lat), addr.name);
      map.addOverlay(myCompOverlay);
    })
	}  
  function addMarker(point, map){
	  var marker = new BMap.Marker(point);
	  map.addOverlay(marker);
	}
  // 复杂的自定义覆盖物
  function ComplexCustomOverlay(point, text, BMap){
    this._point = point;
    this._text = text;
  }
	window.onload = loadJScript;  //异步加载地图
</script>
</html>